<?xml version="1.0" encoding="UTF-8"?>
<knimeNode icon="./googleanalyticsquery.png" type="Manipulator"
	xmlns="http://knime.org/node/v4.1"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://knime.org/node/v4.1 http://knime.org/node/v4.1.xsd">
	<name>Google Analytics Query</name>
	<shortDescription>Query a connected Google Analytics 4 property.</shortDescription>
	<fullDescription>
		<intro>
			<p>This node queries a connected Google Analytics 4 property using the
			 <a href="https://developers.google.com/analytics/devguides/reporting/data/v1?hl=en">Google Analytics Data 
			 API v1</a>.</p>
			<p>
            The node supports building a 
            <a href="https://support.google.com/analytics/answer/9212670?hl=en&amp;ref_topic=13395703">Report</a> 
            by specifying <a href="https://support.google.com/analytics/answer/9143382?hl=en&amp;ref_topic=11151952">
            metrics, dimensions</a>, and date ranges.
            </p>
            <p>
            In order to find available metrics and dimensions, you can use the
            <a href="https://ga-dev-tools.google/ga4/dimensions-metrics-explorer/">GA4 Dimensions &amp; Metrics Explorer
            </a> offered by Google.
            </p>
			<p><b>Note:</b>
            This node can only be used to connect with Google Analytics 4 properties and is not
            compatible with Universal Analytics.
            To migrate a website using Universal Analytics to Google Analytics 4, you can find more information
            in the <a href="https://support.google.com/analytics/answer/10759417?hl=en">official migration guide</a>.
            </p>
		</intro>
		<tab name="Options">
			<option name="Metrics">
				<p>
				Metrics are quantitative measurements of event data for your Google Analytics property.
				</p>
				<p>
                Specify at least one and up to ten metrics to include in your query.
                Metrics can be specified by name and either be built-in metrics or custom metrics defined in your 
                property.
                </p>
                <p>
                Built-in metrics can be seen in the 
                <a href="https://developers.google.com/analytics/devguides/reporting/data/v1/api-schema?hl=en#metrics">list of metrics</a> 
                under the column &quot;API Name&quot;.
				</p>
			</option>
			<option name="Dimensions">
				<p>
				Dimensions are attributes of the event data and their values are always strings.
				</p>
				<p>
                Specify up to nine dimensions by name.
                Available dimension names can be seen in the 
                <a href="https://developers.google.com/analytics/devguides/reporting/data/v1/api-schema?hl=en#dimensions">list of dimensions</a> 
                under the column &quot;API Name&quot;.
				</p>
			</option>
			<option name="Date Ranges">
				<p>
				A date range specifies the range of dates for which to request event data from Google Analytics.
				</p>
				<p>
                Specify at least one and up to four date ranges for which event data will be requested.
                The custom name given to a date range replaces the date range name which is auto-generated by
                Google Analytics.
				</p>
			</option>
		</tab>
        <tab name="Advanced Settings">
			<option name="Include date range name column">
				<p>
				Include a column containing date range names. If a date range is not given a name
                explicitly, Google Analytics will auto-generate a unique name for each date range.
                </p>
			</option>
			<option name="Currency code">
				<p>
				Specify the currency code to use for currency returning metrics, to be stated in three letter
                ISO-4217 format. If it is left empty, the report uses the property&apos;s default currency.
                </p>
			</option>
			<option name="Keep empty rows">
				<p>
				If enabled, rows will also be returned if all their metrics are equal to 0.
			    Otherwise they are omitted from the result.
                </p>
			</option>
			<option name="Output response metadata as flow variables">
				<p>
				If enabled, outputs response metadata from the Google Analytics API as flow variables.
                In particular, the following fields are returned: <tt>dataLossFromOtherRow</tt>,
                <tt>currencyCode</tt>, <tt>timeZone</tt>, <tt>emptyReason</tt>, <tt>subjectToThresholding</tt>.
                The format of the flow variable name follows the pattern <tt>analytics.response.$FIELD</tt>,
                where <tt>$FIELD</tt> specifies the field name.
                </p>
				<p>
                More information can be obtained from the
                <a href="https://developers.google.com/analytics/devguides/reporting/data/v1/rest/v1beta/ResponseMetaData?hl=en">API documentation</a>.
                </p>
			</option>
			<option name="Output property quotas as flow variables">
				<p>
				If enabled, outputs the Google Analytics property quotas as flow variables.
                Each quota will indicate the &quot;consumed&quot; and &quot;remaining&quot; tokens after the last 
                API request made by the node.
                The format of the flow variable name follows the pattern
                <tt>analytics.quota.$QUOTA.$TYPE</tt>, where <tt>$QUOTA</tt> specifies the quota and <tt>$TYPE</tt>
                is either &quot;consumed&quot; or &quot;remaining&quot;.
                Available quotas can be seen in the
                <a href="https://developers.google.com/analytics/devguides/reporting/data/v1/quotas?hl=en">API 
                documentation</a>.
                </p>
    			<p>
                <b>Note:</b> Retrieving a lot of data (many rows, many columns, or long date ranges) or specifying 
                complex filter criteria may be responsible for consumption of many tokens per node execution.
                </p>
			</option>
		</tab>
	</fullDescription>
	<ports>
		<inPort index="0" name="Google Analytics Connection">The connection to a Google Analytics 4 property.</inPort>
		<outPort index="0" name="Google Analytics data">
			A table with data according to the query.
		</outPort>
	</ports>
</knimeNode>
